theory Ugraph_Properties
imports
  Ugraph_Lemmas
  Girth_Chromatic.Girth_Chromatic
begin


type_synonym ugraph_class = "ugraph set"

definition ugraph_property :: "ugraph_class \<Rightarrow> bool" where
"ugraph_property C \<equiv> \<forall>G \<in> C. \<forall>G'. G \<simeq> G' \<longrightarrow> G' \<in> C"

abbreviation prob_in_class :: "(nat \<Rightarrow> real) \<Rightarrow> ugraph_class \<Rightarrow> nat \<Rightarrow> real" where
"prob_in_class p c n \<equiv> probGn p n (\<lambda>es. edge_space.edge_ugraph n es \<in> c)"


definition is_threshold :: "ugraph_class \<Rightarrow> (nat \<Rightarrow> real) \<Rightarrow> bool" where
"is_threshold c t \<equiv> ugraph_property c \<and> (\<forall>p. nonzero_prob_fun p \<longrightarrow>
  (p \<lless> t \<longrightarrow> prob_in_class p c \<longlonglongrightarrow> 0) \<and>
  (t \<lless> p \<longrightarrow> prob_in_class p c \<longlonglongrightarrow> 1))"

lemma is_thresholdI[intro]:
  assumes "ugraph_property c"
  assumes "\<And>p. \<lbrakk> nonzero_prob_fun p; p \<lless> t \<rbrakk> \<Longrightarrow> prob_in_class p c \<longlonglongrightarrow> 0"
  assumes "\<And>p. \<lbrakk> nonzero_prob_fun p; t \<lless> p \<rbrakk> \<Longrightarrow> prob_in_class p c \<longlonglongrightarrow> 1"
  shows "is_threshold c t"
using assms unfolding is_threshold_def by blast

end
