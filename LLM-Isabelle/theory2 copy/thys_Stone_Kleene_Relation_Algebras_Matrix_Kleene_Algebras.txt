This theory gives a matrix model of Stone-Kleene relation algebras.
The main result is that matrices over Kleene algebras form Kleene algebras.

For specifying the size of matrices, Isabelle/HOL's type system requires the use of types, not sets.
This creates two issues when trying to implement Conway's recursive construction directly.
First, the matrix size changes for recursive calls, which requires dependent types.

Because these instruments are not available in Isabelle/HOL, we use square matrices with a constant size given by the argument of the Kleene star operation.
Smaller, possibly rectangular submatrices are identified by two lists of indices: one for the rows to include and one for the columns to include.
Lists are used to make recursive calls deterministic; otherwise sets would be sufficient.
\<close>
subsection \<open>Matrix Restrictions\<close>
text \<open>
In this section we develop a calculus of matrix restrictions.
\<close>
text \<open>
The following function captures Conway's automata-based construction of the Kleene star of a matrix.
Four matrices are computed containing the entries given by Conway's construction.
These four matrices are added to obtain the result.
\<close>
text \<open>
\<close>
text \<open>
The following lemmas deconstruct matrices with non-empty restrictions.
\<close>
text \<open>
The following predicate captures that two index sets are disjoint.
This has consequences for composition and the unit matrix.
\<close>
text \<open>
The following predicate captures that an index set is a subset of another index set.
This has consequences for repeated restrictions.
\<close>
text \<open>
The following lemmas give the sizes of the results of some matrix operations.
\<close>
text \<open>
The following lemmas consider restrictions to singleton index sets.
\<close>
text \<open>
The Kleene star unfold law holds for matrices with a single entry on the diagonal.
\<close>
text \<open>
The following shows the various components of a matrix product.
It is essentially a recursive implementation of the product.
\<close>
text \<open>
Equality of matrices is componentwise.
\<close>
text \<open>
Inequality of matrices is componentwise.
\<close>
text \<open>
The following lemmas treat repeated restrictions to disjoint index sets.
\<close>
text \<open>
The following lemma expresses the equality of a matrix and a product of two matrices componentwise.
\<close>
text \<open>
The following lemma gives a componentwise characterisation of the inequality of a matrix and a product of two matrices.
\<close>
text \<open>
The Kleene star induction laws hold for matrices with a single entry on the diagonal.
\<close>
subsection \<open>Matrices form a Kleene Algebra\<close>
text \<open>
Matrices over Kleene algebras form a Kleene algebra using Conway's construction.
It remains to prove one unfold and two induction axioms of the Kleene star.
Each proof is by induction over the size of the matrix represented by an index list.
\<close>
subsection \<open>Matrices form a Stone-Kleene Relation Algebra\<close>
text \<open>
Matrices over Stone-Kleene relation algebras form a Stone-Kleene relation algebra.
It remains to prove the axiom about the interaction of Kleene star and double complement.
\<close>
