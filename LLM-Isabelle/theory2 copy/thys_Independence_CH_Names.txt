theory Names
  imports
    Forcing_Data
    FrecR_Arities
    ZF_Trans_Interpretations
begin

definition
  Hv :: "[i,i,i]\<Rightarrow>i" where
  "Hv(G,x,f) \<equiv> { z . y\<in> domain(x), (\<exists>p\<in>G. \<langle>y,p\<rangle> \<in> x) \<and> z=f`y}"

in terms of the well-founded recursor.\<close>
subsection\<open>Values and check-names\<close>
  also from \<open>z\<in>domain(x)\<close>
text\<open>The next lemma provides the usual recursive expresion for the definition of \<^term>\<open>val\<close>.\<close>
text\<open>Check-names are the canonical names for elements of the
ground model. Here we show that this is the case.\<close>
  with \<open>\<theta>\<in>domain(\<pi>)\<close> \<open>\<langle>\<theta>,p\<rangle> \<in> \<pi>\<close>
  moreover from this \<open>\<pi>\<in>M\<close>
    from \<open>y \<in> val(G,c)\<close>
    with trans_M \<open>c\<in>M\<close>
text\<open>This lemma can be proved before having \<^term>\<open>check_in_M\<close>. At some point Miguel na√Øvely
thought that the \<^term>\<open>check_in_M\<close> could be proved using this argument.\<close>
  with \<open>check(x)\<in>M\<close>
  with \<open>check(x)\<in>M\<close>
    using \<open>x\<in>nat\<close> def_checkS by simp
    using \<open>z\<in>M\<close> \<open>f\<in>M\<close> transitivity
    using that \<open>X\<in>M\<close> rcheck_in_M is_Hcheck_iff_sats zero_in_M
    using that sats_is_wfrec_fm \<open>X\<in>M\<close> rcheck_in_M zero_in_M
    using that \<open>X\<in>M\<close> rcheck_in_M
    using ZF_ground_replacements(2) artyf \<open>X\<in>M\<close> rcheck_in_M
