theory Autoref_Fix_Rel
imports Autoref_Id_Ops
begin

ML_val "2 upto 5"

definition PRIO_TAG :: "int \<Rightarrow> int \<Rightarrow> bool" 
  where [simp]: "PRIO_TAG ma mi \<equiv> True"
lemma PRIO_TAGI: "PRIO_TAG ma mi" by simp

abbreviation "MAJOR_PRIO_TAG i \<equiv> PRIO_TAG i 0"
abbreviation "MINOR_PRIO_TAG i \<equiv> PRIO_TAG 0 i"
abbreviation "DFLT_PRIO_TAG \<equiv> PRIO_TAG 0 0"

abbreviation "PRIO_TAG_OPTIMIZATION \<equiv> MINOR_PRIO_TAG 10"
abbreviation "PRIO_TAG_GEN_ALGO \<equiv> MINOR_PRIO_TAG (- 10)"



definition CONSTRAINT :: "'a \<Rightarrow> ('c\<times>'a) set \<Rightarrow> bool" 
  where [simp]: "CONSTRAINT f R \<equiv> True"

lemma CONSTRAINTI: "CONSTRAINT f R" by auto

setup Autoref_Rules.setup



definition PREFER_tag :: "bool \<Rightarrow> bool" 
  where [simp, autoref_tag_defs]: "PREFER_tag x \<equiv> x"
definition DEFER_tag :: "bool \<Rightarrow> bool" 
  where [simp, autoref_tag_defs]: "DEFER_tag x \<equiv> x"

lemma PREFER_tagI: "P \<Longrightarrow> PREFER_tag P" by simp
lemma DEFER_tagI: "P \<Longrightarrow> DEFER_tag P" by simp
lemmas SIDEI = PREFER_tagI DEFER_tagI

definition [simp, autoref_tag_defs]: "GEN_OP_tag P == P"
lemma GEN_OP_tagI: "P ==> GEN_OP_tag P" by simp
abbreviation "SIDE_GEN_OP P == PREFER_tag (GEN_OP_tag P)"
abbreviation "GEN_OP c a R \<equiv> SIDE_GEN_OP ((c,OP a ::: R) \<in> R)"


definition TYREL :: "('a\<times>'b) set \<Rightarrow> bool" 
  where [simp]: "TYREL R \<equiv> True"
definition TYREL_DOMAIN :: "'a itself \<Rightarrow> bool" 
  where [simp]: "TYREL_DOMAIN i \<equiv> True"

lemma TYREL_RES: "\<lbrakk> TYREL_DOMAIN TYPE('a); TYREL (R::(_\<times>'a) set) \<rbrakk> \<Longrightarrow> TYREL R"
  .

lemma DOMAIN_OF_TYREL: "TYREL (R::(_\<times>'a) set) 
  \<Longrightarrow> TYREL_DOMAIN TYPE('a)" by simp

lemma TYRELI: "TYREL (R::(_\<times>'a) set)" by simp

lemma ty_REL: "TYREL (R::(_\<times>'a) set)" by simp



setup Autoref_Fix_Rel.setup

end
